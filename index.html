<!DOCTYPE html>
<html lang="et">
<head>
<meta charset="UTF-8">
<title>heeh.ee</title>

<style>
html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  background: black;
  overflow: hidden;
}

/* nähtamatu unlock kiht */
#unlock {
  position: fixed;
  inset: 0;
  z-index: 9999;
  cursor: pointer;
}

/* gif */
#gif {
  position: fixed;
  bottom: 20px;
  left: 20px;
  width: 120px;
  transform-origin: bottom left;
  transform: scale(0.18);
  transition: transform 0.15s ease-out;
}
</style>
</head>

<body>

<div id="unlock"></div>
<img id="gif" src="hehe-dance.gif" alt="dance">

<script>
/* =======================
   KONFIG
======================= */
const BPM = 120;                  // muuda loo järgi
const BEAT_MS = 60000 / BPM;

/* =======================
   STATE
======================= */
let audio = null;
let beat = 0;
let started = false;
let startTime = 0;

/* =======================
   ELEMENTID
======================= */
const gif = document.getElementById("gif");
const unlock = document.getElementById("unlock");

/* =======================
   ABI
======================= */
function tension() {
  const seconds = (Date.now() - startTime) / 1000;
  return Math.min(1, seconds / 40); // pingelisus kasvab 40 sek
}

/* =======================
   START (AINUS LUBATUD)
======================= */
function start() {
  if (started) return;
  started = true;

  // heli luuakse JA käivitatakse kliki sees
  audio = new Audio("billijean.mp3");
  audio.volume = 1;
  audio.play();

  startTime = Date.now();
  unlock.remove();

  setInterval(() => {
    beat++;

    const t = tension();
    let scale = 1.2 + t * 1.5;

    // megazoom iga 8. löök pärast 4
    if (beat > 4 && beat % 8 === 0) {
      scale = 3 + t * 4;
    }

    gif.style.transform = `scale(${scale})`;

  }, BEAT_MS);
}

/* =======================
   USER GESTURE (KOHUSTUSLIK)
======================= */
unlock.addEventListener("pointerdown", start);
unlock.addEventListener("keydown", start);
</script>

</body>
</html>
